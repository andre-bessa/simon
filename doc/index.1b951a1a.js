!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}var s=new AudioContext,n=s.createGain(),o=document.getElementById("volume");n.gain.setValueAtTime(o.valueAsNumber,s.currentTime),n.connect(s.destination),o.addEventListener("change",(function(){n.gain.setValueAtTime(this.valueAsNumber,s.currentTime)}));var l=function(){"use strict";function e(i,o,l,a,h){t(this,e),this._id=i,this._el=document.getElementById(i),this._color=o,this._lightColor=l,this._shadowColor=a,this._tone=h,this._oscillator=s.createOscillator(),this._volume=s.createGain(),this._isPressed=!1,this._el.style.boxShadow="0px 12px ".concat(this._shadowColor),this._setNormalColor(),this._oscillator.type="square",this._oscillator.frequency.setValueAtTime(this._tone,s.currentTime),this._oscillator.connect(this._volume),this._volume.gain.setValueAtTime(0,s.currentTime),this._volume.connect(n),this._oscillator.start(s.currentTime),this._el.addEventListener("mousedown",function(t){t.preventDefault(),this._press()}.bind(this)),this._el.addEventListener("mouseleave",function(t){t.preventDefault(),this._isPressed&&(this._isPressed=!1,this._el.style.transform="initial",this._el.style.boxShadow="0px 12px ".concat(this._shadowColor),this._setNormalColor(),this._stopSound(),console.log("> Input Canceled"))}.bind(this)),this._el.addEventListener("mouseup",function(t){t.preventDefault(),this._release()}.bind(this)),this._el.addEventListener("touchstart",function(t){t.preventDefault(),this._press()}.bind(this)),this._el.addEventListener("touchend",function(t){t.preventDefault(),this._release()}.bind(this))}return i(e,[{key:"_press",value:function(){this._isPressed||r.isPlayingAnimation||(this._isPressed=!0,this._el.style.transform="translateY(7px)",this._el.style.boxShadow="0px 5px ".concat(this._shadowColor),u.isOver||r.isPlayingAnimation||(this._setPressedColor(),this._playSound()))}},{key:"_release",value:function(){this._isPressed&&(this._isPressed=!1,this._el.style.transform="initial",this._el.style.boxShadow="0px 12px ".concat(this._shadowColor),u.isOver||r.isPlayingAnimation||(this._setNormalColor(),this._stopSound(),u.getAnswer(this._id)))}},{key:"play",value:function(t){this._setPressedColor(),this._playSound(),setTimeout(function(){this._setNormalColor(),this._stopSound()}.bind(this),2*t/3)}},{key:"_setPressedColor",value:function(){this._el.style.backgroundImage="radial-gradient(120px, ".concat(this._lightColor,", ").concat(this._color,")")}},{key:"_setNormalColor",value:function(){this._el.style.backgroundImage="radial-gradient(160px at 200px 10px, ".concat(this._lightColor,", ").concat(this._color,")")}},{key:"_playSound",value:function(){this._volume.gain.linearRampToValueAtTime(1,s.currentTime)}},{key:"_stopSound",value:function(){this._volume.gain.setValueAtTime(0,s.currentTime)}},{key:"id",get:function(){return this._id}}]),e}(),a=function(){"use strict";function e(i,s,n,o){t(this,e),this._greenBtn=i,this._redBtn=s,this._yellowBtn=n,this._blueBtn=o,this._isPlayingAnimation=!1,this._idToButton=new Map,this._idToButton.set(this._greenBtn.id,this._greenBtn),this._idToButton.set(this._redBtn.id,this._redBtn),this._idToButton.set(this._yellowBtn.id,this._yellowBtn),this._idToButton.set(this._blueBtn.id,this._blueBtn)}return i(e,[{key:"playSequence",value:function(t,e){this._isPlayingAnimation=!0;var i=setInterval(function(){0==t.length?(this._isPlayingAnimation=!1,clearInterval(i)):this._idToButton.get(t.shift()).play(e)}.bind(this),e)}},{key:"loseAnimation",value:function(){this._playAllButtons(200),setTimeout(function(){this._playAllButtons(800)}.bind(this),400)}},{key:"_playAllButtons",value:function(t){var e=void 0===t?300:t;this._isPlayingAnimation=!0,this._greenBtn.play(e),this._redBtn.play(e),this._yellowBtn.play(e),this._blueBtn.play(e),setTimeout(function(){this._isPlayingAnimation=!1}.bind(this),e)}},{key:"isPlayingAnimation",get:function(){return this._isPlayingAnimation}}]),e}(),h=function(){"use strict";function e(){t(this,e),this._isOver=!0,this._sequence=[],this._answer=[],this._score=0}return i(e,[{key:"getAnswer",value:function(t){if(!this._isOver&&!this._isPlayingAnimation){this._answer.push(t);var e=this._answer.length-1;if(this._answer[e]!=this._sequence[e])return this._isOver=!0,void r.loseAnimation();this._answer.length==this._sequence.length&&this._newRound()}}},{key:"_newRound",value:function(){this._updateScore(),this._sequence.push(Math.floor(4*Math.random())),r.playSequence(this._sequence.slice(),500),this._answer=[]}},{key:"newGame",value:function(){this._isOver=!1,this._sequence=[],this._answer=[],this._score=0,this._newRound(),s.resume()}},{key:"isOver",get:function(){return this._isOver}},{key:"_updateScore",value:function(){document.getElementById("score").textContent=this._score<10?"0"+this._score:this._score,this._score++}}]),e}(),r=new a(new l(0,"hsl(150, 100%, 45%)","hsl(150, 100%, 85%)","hsl(150,  90%, 35%)",440),new l(1,"hsl(  0, 100%, 45%)","hsl(  0, 100%, 85%)","hsl(  0,  90%, 35%)",329.628),new l(2,"hsl( 60, 100%, 45%)","hsl( 60, 100%, 85%)","hsl( 60,  90%, 35%)",261.626),new l(3,"hsl(225,  55%, 45%)","hsl(225,  55%, 85%)","hsl(225,  45%, 35%)",220)),u=new h;document.getElementById("new-game-btn").addEventListener("click",(function(){r.isPlayingAnimation||u.newGame.call(u)}))}();